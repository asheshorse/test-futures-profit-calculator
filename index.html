<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœŸè´§å†å²ç›ˆåˆ©å›æµ‹å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
        }
      
        body {
            background: linear-gradient(135deg, #1a2a6c, #2c3e50);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
      
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
      
        header {
            text-align: center;
            padding: 30px 0;
            color: white;
        }
      
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
      
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
      
        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-top: 20px;
        }
      
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
      
        .input-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
        }
      
        .result-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            max-height: 80vh;
            overflow-y: auto;
        }
      
        .form-group {
            margin-bottom: 20px;
        }
      
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }
      
        select, input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
        }
      
        select:focus, input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 8px rgba(52, 152, 219, 0.5);
        }
      
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }
      
        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
      
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #3498db;
            padding: 15px;
            border-radius: 0 8px 8px 0;
            margin-top: 10px;
            display: none;
        }
      
        .info-box p {
            margin: 5px 0;
            font-size: 0.95rem;
        }
      
        .info-highlight {
            color: #e74c3c;
            font-weight: bold;
        }
      
        .table-container {
            margin-top: 20px;
            overflow-x: auto;
        }
      
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
      
        th, td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
      
        th {
            background-color: #3498db;
            color: white;
            position: sticky;
            top: 0;
        }
      
        tr:nth-child(even) {
            background-color: #f5f9ff;
        }
      
        tr:hover {
            background-color: #e3f2fd;
        }
      
        .profit-positive {
            color: #27ae60;
            font-weight: bold;
        }
      
        .profit-negative {
            color: #e74c3c;
            font-weight: bold;
        }
      
        .summary {
            margin-top: 20px;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 8px;
            font-size: 1.1rem;
        }
      
        .summary-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
            text-align: center;
            font-size: 1.2rem;
        }
      
        .summary-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
      
        .summary-item {
            padding: 10px;
            background: white;
            border-radius: 8px;
            text-align: center;
        }
      
        .summary-value {
            font-size: 1.3rem;
            font-weight: bold;
            margin-top: 5px;
        }
      
        .positive {
            color: #27ae60;
        }
      
        .negative {
            color: #e74c3c;
        }
      
        .section-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
      
        .result-placeholder {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-style: italic;
        }
      
        .flex-row {
            display: flex;
            gap: 15px;
        }
      
        .flex-row > div {
            flex: 1;
        }
      
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
      
        .logo-icon {
            font-size: 2.5rem;
            color: #3498db;
        }
      
        .logo-text {
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
        }
      
        footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            padding: 20px;
            font-size: 0.9rem;
            margin-top: 30px;
        }
      
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
          
            .flex-row {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">ğŸ“ˆ</div>
                <div class="logo-text">æœŸè´§å†å²ç›ˆåˆ©å›æµ‹å™¨</div>
            </div>
            <p class="subtitle">åŸºäºå†å²æ•°æ®å’Œäº¤æ˜“ç­–ç•¥çš„æœŸè´§ç›ˆåˆ©å›æµ‹å·¥å…·</p>
        </header>
      
        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">äº¤æ˜“å‚æ•°è®¾ç½®</h2>
              
                <div class="form-group">
                    <label for="futures-type">æœŸè´§å“ç§</label>
                    <select id="futures-type">
                        <option value="">-- è¯·é€‰æ‹©æœŸè´§å“ç§ --</option>
                        <!-- æœŸè´§å“ç§é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </select>
                </div>
              
                <div class="form-group">
                    <label for="multiplier">äº¤æ˜“ä¹˜æ•°ï¼ˆäº¤æ˜“å•ä½ï¼‰</label>
                    <input type="text" id="multiplier" readonly>
                </div>
              
                <div class="flex-row">
                    <div class="form-group">
                        <label for="open-type">å¼€ä»“æ–¹å¼</label>
                        <select id="open-type">
                            <option value="long">å¤šå¼€</option>
                            <option value="short">ç©ºå¼€</option>
                        </select>
                    </div>
                  
                    <div class="form-group">
                        <label for="close-type">å¹³ä»“æ–¹å¼</label>
                        <input type="text" id="close-type" value="å¤šå¹³" readonly>
                    </div>
                </div>
              
                <div class="flex-row">
                    <div class="form-group">
                        <label for="margin-rate">ä¿è¯é‡‘ç‡ (%)</label>
                        <input type="number" id="margin-rate" min="1" max="100" step="0.5" value="10">
                    </div>
                  
                    <div class="form-group">
                        <label for="capital">è´­ä¹°é‡‘é¢ (å…ƒ)</label>
                        <input type="number" id="capital" min="1000" step="1000" value="50000">
                    </div>
                </div>
              
                <div class="flex-row">
                    <div class="form-group">
                        <label for="open-price">å¼€ä»“ä»·æ ¼</label>
                        <input type="number" id="open-price" min="0.01" step="0.01" value="5000">
                    </div>
                  
                    <div class="form-group">
                        <label for="close-price">å¹³ä»“ä»·æ ¼</label>
                        <input type="number" id="close-price" min="0.01" step="0.01" value="5500">
                    </div>
                </div>
              
                <div class="form-group">
                    <label for="add-margin-type">æµ®ç›ˆåŠ ä»“æ–¹å¼</label>
                    <select id="add-margin-type">
                        <option value="pyramid">å€’é‡‘å­—å¡”åŠ ä»“</option>
                        <option value="percent">æ¯æ¶¨10%åŠ ä»“</option>
                    </select>
                </div>
              
                <div id="calculation-info" class="info-box">
                    <p>ä¸€æ‰‹æ‰€éœ€ä¿è¯é‡‘: <span id="margin-per-lot" class="info-highlight">0</span> å…ƒ</p>
                    <p>æœ€å¤§å¯ä¹°æ‰‹æ•°: <span id="max-lots" class="info-highlight">0</span> æ‰‹</p>
                    <p id="insufficient-warning" style="color: #e74c3c; display: none;">è­¦å‘Šï¼šå¯ç”¨èµ„é‡‘ä¸è¶³è´­ä¹°ä¸€æ‰‹ï¼</p>
                </div>
              
                <button id="calculate-btn" class="btn">è®¡ç®—å›æµ‹ç»“æœ</button>
            </div>
          
            <div class="result-section">
                <h2 class="section-title">å›æµ‹ç»“æœåˆ†æ</h2>
              
                <div id="result-placeholder" class="result-placeholder">
                    <p>è¯·è®¾ç½®äº¤æ˜“å‚æ•°å¹¶ç‚¹å‡»"è®¡ç®—å›æµ‹ç»“æœ"æŒ‰é’®</p>
                    <p>ç³»ç»Ÿå°†æ ¹æ®æ‚¨çš„ç­–ç•¥ç”Ÿæˆå†å²å›æµ‹æ•°æ®</p>
                </div>
              
                <div id="result-content" style="display: none;">
                    <div class="table-container">
                        <table id="result-table">
                            <thead>
                                <tr>
                                    <th>æ“ä½œç±»å‹</th>
                                    <th>å¼€ä»“ä»·æ ¼</th>
                                    <th>å¼€ä»“æ‰‹æ•°</th>
                                    <th>å¹³ä»“ä»·æ ¼</th>
                                    <th>ç›ˆåˆ©é‡‘é¢</th>
                                    <th>ç´¯è®¡ç›ˆåˆ©</th>
                                    <th>æµ®ç›ˆåŠ ä»“æ–¹å¼</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- ç»“æœè¡¨æ ¼å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </tbody>
                        </table>
                    </div>
                  
                    <div class="summary">
                        <div class="summary-title">äº¤æ˜“ç­–ç•¥æ±‡æ€»</div>
                        <div class="summary-content">
                            <div class="summary-item">
                                <div>åˆå§‹æŠ•å…¥èµ„é‡‘</div>
                                <div class="summary-value" id="initial-capital">0 å…ƒ</div>
                            </div>
                            <div class="summary-item">
                                <div>æœ€ç»ˆè´¦æˆ·ä»·å€¼</div>
                                <div class="summary-value" id="final-value">0 å…ƒ</div>
                            </div>
                            <div class="summary-item">
                                <div>æ€»ç›ˆåˆ©é‡‘é¢</div>
                                <div class="summary-value" id="total-profit">0 å…ƒ</div>
                            </div>
                            <div class="summary-item">
                                <div>æ€»æ”¶ç›Šç‡</div>
                                <div class="summary-value" id="return-rate">0%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      
        <footer>
            <p>Â© 2025 æœŸè´§å†å²ç›ˆåˆ©å›æµ‹å™¨ | æœ¬å·¥å…·ä»…ç”¨äºå†å²æ•°æ®å›æµ‹ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®® | å®é™…äº¤æ˜“ç»“æœå¯èƒ½å› å¸‚åœºæ³¢åŠ¨è€Œå¼‚</p>
        </footer>
    </div>

    <script>
        // æœŸè´§å“ç§æ•°æ®
        const futuresData = [
            { name: "ç™½é“¶", code: "ag", multiplier: 15 },
            { name: "é»„é‡‘", code: "au", multiplier: 1000 },
            { name: "é”°ç¡…", code: "sm", multiplier: 5 },
            { name: "ç¡…é“", code: "sf", multiplier: 5 },
            { name: "èºçº¹é’¢", code: "rb", multiplier: 10 },
            { name: "çƒ­å·", code: "hc", multiplier: 10 },
            { name: "é“çŸ¿çŸ³", code: "i", multiplier: 100 },
            { name: "ä¸é”ˆé’¢", code: "ss", multiplier: 5 },
            { name: "ç„¦ç‚­", code: "j", multiplier: 100 },
            { name: "ç„¦ç…¤", code: "jm", multiplier: 60 },
            { name: "çº¯ç¢±", code: "sa", multiplier: 20 },
            { name: "ç»ç’ƒ", code: "fg", multiplier: 20 },
            { name: "PVC", code: "v", multiplier: 5 },
            { name: "å¡‘æ–™", code: "l", multiplier: 5 },
            { name: "æ©¡èƒ¶", code: "ru", multiplier: 10 },
            { name: "ç”²é†‡", code: "ma", multiplier: 10 },
            { name: "çº¸æµ†", code: "sp", multiplier: 10 },
            { name: "çƒ§ç¢±", code: "sh", multiplier: 5 },
            { name: "åŸæ²¹", code: "sc", multiplier: 1000 },
            { name: "ç‡ƒæ–™æ²¹", code: "fu", multiplier: 10 },
            { name: "èšä¸™çƒ¯", code: "pp", multiplier: 5 },
            { name: "æ¶²åŒ–çŸ³æ²¹æ°”", code: "pg", multiplier: 20 },
            { name: "å°¿ç´ ", code: "ur", multiplier: 20 },
            { name: "ä¹™äºŒé†‡", code: "eg", multiplier: 10 },
            { name: "åŸæœ¨", code: "lg", multiplier: 10 },
            { name: "PTA", code: "ta", multiplier: 5 },
            { name: "ç‰ç±³", code: "c", multiplier: 10 },
            { name: "ç™½ç³–", code: "sr", multiplier: 10 },
            { name: "æ£‰èŠ±", code: "cf", multiplier: 5 },
            { name: "è‹¹æœ", code: "ap", multiplier: 10 },
            { name: "ç”ŸçŒª", code: "lh", multiplier: 16 },
            { name: "é¸¡è›‹", code: "jd", multiplier: 5 },
            { name: "æ£•æ¦ˆæ²¹", code: "p", multiplier: 10 },
            { name: "è±†ç²•", code: "m", multiplier: 10 },
            { name: "è±†æ²¹", code: "y", multiplier: 10 },
            { name: "èœç²•", code: "rm", multiplier: 10 },
            { name: "èœæ²¹", code: "oi", multiplier: 10 },
            { name: "ç¢³é…¸é”‚", code: "lc", multiplier: 1 },
            { name: "å¤šæ™¶ç¡…", code: "ps", multiplier: 5 },
            { name: "é”Œ", code: "zn", multiplier: 5 },
            { name: "å·¥ä¸šç¡…", code: "si", multiplier: 5 },
            { name: "é“œ", code: "cu", multiplier: 5 },
            { name: "æ°§åŒ–é“", code: "ao", multiplier: 20 },
            { name: "é”¡", code: "sn", multiplier: 1 },
            { name: "é•", code: "ni", multiplier: 1 },
            { name: "é“", code: "al", multiplier: 5 },
            { name: "é“…", code: "pb", multiplier: 5 },
            { name: "å›½é™…é“œ", code: "bc", multiplier: 5 },
            { name: "é›†è¿æŒ‡æ•°", code: "ec", multiplier: 50 }
        ];
      
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // å¡«å……æœŸè´§å“ç§ä¸‹æ‹‰èœå•
            const futuresSelect = document.getElementById('futures-type');
            futuresData.forEach(future => {
                const option = document.createElement('option');
                option.value = future.code;
                option.textContent = `${future.name} (${future.code})`;
                futuresSelect.appendChild(option);
            });
          
            // é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªæœŸè´§å“ç§
            if (futuresData.length > 0) {
                futuresSelect.value = futuresData[0].code;
                updateMultiplier();
            }
          
            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            futuresSelect.addEventListener('change', updateMultiplier);
            document.getElementById('open-type').addEventListener('change', updateCloseType);
            document.getElementById('calculate-btn').addEventListener('click', calculateResults);
          
            // åˆå§‹è®¡ç®—ä¿è¯é‡‘
            calculateMargin();
          
            // ä¸ºè¾“å…¥æ¡†æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œå®æ—¶è®¡ç®—ä¿è¯é‡‘
            const inputs = ['margin-rate', 'capital', 'open-price'];
            inputs.forEach(id => {
                document.getElementById(id).addEventListener('input', calculateMargin);
            });
        });
      
        // æ›´æ–°äº¤æ˜“ä¹˜æ•°
        function updateMultiplier() {
            const futuresCode = document.getElementById('futures-type').value;
            const future = futuresData.find(f => f.code === futuresCode);
            if (future) {
                document.getElementById('multiplier').value = `${future.multiplier} æ‰‹/å•ä½`;
                calculateMargin();
            }
        }
      
        // æ›´æ–°å¹³ä»“æ–¹å¼
        function updateCloseType() {
            const openType = document.getElementById('open-type').value;
            document.getElementById('close-type').value = openType === 'long' ? 'å¤šå¹³' : 'ç©ºå¹³';
        }
      
        // è®¡ç®—ä¸€æ‰‹ä¿è¯é‡‘
        function calculateMargin() {
            const futuresCode = document.getElementById('futures-type').value;
            const marginRate = parseFloat(document.getElementById('margin-rate').value) / 100;
            const capital = parseFloat(document.getElementById('capital').value);
            const openPrice = parseFloat(document.getElementById('open-price').value);
          
            const future = futuresData.find(f => f.code === futuresCode);
            if (!future) return;
          
            // è®¡ç®—ä¸€æ‰‹ä¿è¯é‡‘
            const marginPerLot = openPrice * future.multiplier * marginRate;
            document.getElementById('margin-per-lot').textContent = marginPerLot.toFixed(2);
          
            // è®¡ç®—æœ€å¤§å¯ä¹°æ‰‹æ•°
            const maxLots = Math.floor(capital / marginPerLot);
            document.getElementById('max-lots').textContent = maxLots;
          
            // æ˜¾ç¤ºè®¡ç®—ç»“æœ
            document.getElementById('calculation-info').style.display = 'block';
          
            // æ˜¾ç¤ºä¸è¶³ä¸€æ‰‹è­¦å‘Š
            if (maxLots < 1) {
                document.getElementById('insufficient-warning').style.display = 'block';
            } else {
                document.getElementById('insufficient-warning').style.display = 'none';
            }
        }
      
        // è®¡ç®—å›æµ‹ç»“æœ
        function calculateResults() {
            // éšè—å ä½ç¬¦ï¼Œæ˜¾ç¤ºç»“æœ
            document.getElementById('result-placeholder').style.display = 'none';
            document.getElementById('result-content').style.display = 'block';
          
            // è·å–è¾“å…¥å€¼
            const futuresCode = document.getElementById('futures-type').value;
            const openType = document.getElementById('open-type').value;
            const marginRate = parseFloat(document.getElementById('margin-rate').value) / 100;
            const capital = parseFloat(document.getElementById('capital').value);
            const openPrice = parseFloat(document.getElementById('open-price').value);
            const closePrice = parseFloat(document.getElementById('close-price').value);
            const addMarginType = document.getElementById('add-margin-type').value;
          
            const future = futuresData.find(f => f.code === futuresCode);
            if (!future) return;
          
            // è®¡ç®—åˆå§‹å‚æ•°
            const marginPerLot = openPrice * future.multiplier * marginRate;
            const maxLots = Math.floor(capital / marginPerLot);
          
            // æ£€æŸ¥æ˜¯å¦å¯äº¤æ˜“
            if (maxLots < 1) {
                alert("å¯ç”¨èµ„é‡‘ä¸è¶³è´­ä¹°ä¸€æ‰‹ï¼Œè¯·è°ƒæ•´å‚æ•°ï¼");
                return;
            }
          
            // æ–¹å‘ç³»æ•°ï¼ˆå¤šå¼€ä¸º1ï¼Œç©ºå¼€ä¸º-1ï¼‰
            const direction = openType === 'long' ? 1 : -1;
          
            // åˆå§‹åŒ–å˜é‡
            let currentPrice = openPrice;
            let profit = 0;
            let cumulativeProfit = 0;
            let totalProfit = 0;
            let totalLots = maxLots;
            let addMarginCount = 0;
          
            // æ¸…ç©ºè¡¨æ ¼
            const tableBody = document.querySelector('#result-table tbody');
            tableBody.innerHTML = '';
          
            // æ·»åŠ åˆå§‹ä»“ä½è¡Œ
            const initialProfit = (closePrice - openPrice) * future.multiplier * maxLots * direction;
            totalProfit += initialProfit;
            cumulativeProfit = initialProfit;
          
            addTableRow(tableBody, "åˆå§‹å¼€ä»“", openPrice, maxLots, closePrice, initialProfit, cumulativeProfit, "-");
          
            // æ ¹æ®åŠ ä»“æ–¹å¼è®¡ç®—åŠ ä»“
            if (addMarginType === 'pyramid') {
                // å€’é‡‘å­—å¡”åŠ ä»“ï¼šåŠ ä»“æ¬¡æ•°é€’å‡
                const priceChange = (closePrice - openPrice) * direction;
                const steps = Math.min(Math.floor(Math.abs(priceChange) / (openPrice * 0.05)), 4);
              
                for (let i = 1; i <= steps; i++) {
                    addMarginCount++;
                    const stepSize = (steps - i + 1) / (steps * (steps + 1) / 2);
                    const addLots = Math.max(1, Math.floor(maxLots * stepSize));
                  
                    const addOpenPrice = openPrice + (closePrice - openPrice) * (i / (steps + 1));
                    const addProfit = (closePrice - addOpenPrice) * future.multiplier * addLots * direction;
                  
                    totalProfit += addProfit;
                    cumulativeProfit += addProfit;
                    totalLots += addLots;
                  
                    addTableRow(tableBody, `åŠ ä»“ ${i}`, addOpenPrice, addLots, closePrice, 
                                addProfit, cumulativeProfit, "å€’é‡‘å­—å¡”åŠ ä»“");
                }
            } else {
                // æ¯æ¶¨10%åŠ ä»“
                const priceChange = (closePrice - openPrice) * direction;
                const minChange = openPrice * 0.1;
                let changeAmount = minChange;
                let addCount = 0;
              
                while (Math.abs(priceChange) > changeAmount && addCount < 5) {
                    addCount++;
                    addMarginCount++;
                  
                    const addOpenPrice = openPrice + minChange * direction * addCount;
                    const addLots = Math.max(1, Math.floor(maxLots * 0.5));
                    const addProfit = (closePrice - addOpenPrice) * future.multiplier * addLots * direction;
                  
                    totalProfit += addProfit;
                    cumulativeProfit += addProfit;
                    totalLots += addLots;
                  
                    addTableRow(tableBody, `åŠ ä»“ ${addCount}`, addOpenPrice, addLots, closePrice, 
                                addProfit, cumulativeProfit, "æ¯æ¶¨10%åŠ ä»“");
                  
                    changeAmount += minChange;
                }
            }
          
            // æ›´æ–°æ±‡æ€»ä¿¡æ¯
            const finalValue = capital + totalProfit;
            const returnRate = ((finalValue - capital) / capital * 100).toFixed(2);
          
            document.getElementById('initial-capital').textContent = capital.toFixed(2) + " å…ƒ";
            document.getElementById('final-value').textContent = finalValue.toFixed(2) + " å…ƒ";
            document.getElementById('total-profit').textContent = totalProfit.toFixed(2) + " å…ƒ";
            document.getElementById('return-rate').textContent = returnRate + "%";
          
            // è®¾ç½®é¢œè‰²
            document.getElementById('total-profit').className = totalProfit >= 0 ? 
                "summary-value positive" : "summary-value negative";
            document.getElementById('return-rate').className = parseFloat(returnRate) >= 0 ? 
                "summary-value positive" : "summary-value negative";
        }
      
        // æ·»åŠ è¡¨æ ¼è¡Œ
        function addTableRow(tableBody, operation, openPrice, lots, closePrice, profit, cumulative, method) {
            const row = tableBody.insertRow();
          
            row.insertCell(0).textContent = operation;
            row.insertCell(1).textContent = openPrice.toFixed(2);
            row.insertCell(2).textContent = lots;
            row.insertCell(3).textContent = closePrice.toFixed(2);
          
            const profitCell = row.insertCell(4);
            profitCell.textContent = profit.toFixed(2);
            profitCell.className = profit >= 0 ? "profit-positive" : "profit-negative";
          
            const cumulativeCell = row.insertCell(5);
            cumulativeCell.textContent = cumulative.toFixed(2);
            cumulativeCell.className = cumulative >= 0 ? "profit-positive" : "profit-negative";
          
            row.insertCell(6).textContent = method;
        }
    </script>
</body>
</html>
